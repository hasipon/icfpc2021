#include <bits/stdc++.h>
using namespace std;
typedef long long ll;
int N, E, V, EPS;
vector<pair<int,int>> H, G, P;
ll d(pair<int,int> p0, pair<int,int> p1) {
	ll dx = p0.first - p1.first;
	ll dy = p0.second - p1.second;
	return dx*dx + dy*dy;
}
int main() {
	cin >> N >> E >> V >> EPS;
	H.resize(N);
	G.resize(E);
	P.resize(V);
	for (auto& x : H) {
		cin >> x.first >> x.second;
	}
	for (auto& x : G) cin >> x.first >> x.second;
	for (auto& x : P) cin >> x.first >> x.second;
	vector<ll> Hd(N);
	for (int i = 0; i < N; ++ i) {
		Hd[i] = d(H[i], H[(i+1)%N]);
	}
	vector<vector<pair<int,int>>> hoge(N);
	for (int i = 0; i < E; ++ i) {
		ll d1 = d(P[G[i].first], P[G[i].second]);
		for (int j = 0; j < N; ++ j) {
			ll d0 = Hd[j];
			if ((1000000-EPS)*d0 <= d1*1000000 && d1*1000000 <= (1000000+EPS)*d0) {
				hoge[j].push_back(G[i]);
			}
		}
	}
	map<int,int> counter;
	map<int,vector<vector<int>>> a;
	set<int> used = {40,50,17,18,51,49,69,100,99,70,83,74,118,156,160,168,134,126,88,66,58,207,216,213,193,172,158,153,170,125,107,63,43,76,113,32,37,30,15,14,8,10,12,26,24,3,7,5,4,13,19,22,192,208,215,222,220,217,204,211,221,223,219,212,189,173,54,80,65,47,23,39};
	const int TH = 5;
	for (int i = 0; i < 2*N; ++ i) {
		map<int,vector<vector<int>>> b;
		for (auto [u,v] : hoge[i%N]) {
			b[u].push_back({v,u});
			b[v].push_back({u,v});
			for (auto aa : a[u]) {
				if (find(aa.begin(), aa.end(), v) != aa.end()) continue;
				aa.push_back(v);
				b[v].push_back(aa);
				bool ok = true;
				for (int x : aa) if (used.count(x)) { ok = false; break; }
				if (ok) {
					++ counter[(int)aa.size()];
					if (aa.size() >= TH) {
						cout << i << " " << aa.size() << endl;
						for (auto x : aa) cout << x << ",";
						cout << endl;
					}
				}
			}
			for (auto aa : a[v]) {
				if (find(aa.begin(), aa.end(), u) != aa.end()) continue;
				aa.push_back(u);
				b[u].push_back(aa);
				bool ok = true;
				for (int x : aa) if (used.count(x)) { ok = false; break; }
				if (ok) {
					++ counter[(int)aa.size()];
					if (aa.size() >= TH) {
						cout << i << " " << aa.size() << endl;
						for (auto x : aa) cout << x << ",";
						cout << endl;
					}
				}
			}
		}
		a = b;
	}
	for (auto [x, y] : counter) cout << x << " " << y << endl;
	auto res = vector<pair<int,int>>(V);
	//for (int i = 0; i < V; ++ i) res[i] = {400,i*4};
	{
		vector<int> a {40,50,17,18,51,49,69,100,99,70,83,74,118,156,160,168,134,126,88,66,58};
		for (int i = 0; i < (int)a.size(); ++ i) {
			res[a[i]] = H[(i+27-a.size()+2)%H.size()];
		}
	}
	{
		vector<int> a {207,216,213,193,172,158,153,170,125,107,63,43,76,113};
		for (int i = 0; i < (int)a.size(); ++ i) {
			res[a[i]] = H[(i+73-a.size()+2)%H.size()];
		}
	}
	{
		vector<int> a {32,37,30,15,14,8,10,12,26,24};
		for (int i = 0; i < (int)a.size(); ++ i) {
			res[a[i]] = H[(i+89-a.size()+2)%H.size()];
		}
	}
	{
		vector<int> a {3,7,5,4,13,19,22};
		for (int i = 0; i < (int)a.size(); ++ i) {
			res[a[i]] = H[(i+5-a.size()+2)%H.size()];
		}
	}
	{
		vector<int> a {192,208,215,222,220,217,204};
		for (int i = 0; i < (int)a.size(); ++ i) {
			res[a[i]] = H[(i+46-a.size()+2)%H.size()];
		}
	}
	{
		vector<int> a {211,221,223,219,212,189,173};
		for (int i = 0; i < (int)a.size(); ++ i) {
			res[a[i]] = H[(i+56-a.size()+2)%H.size()];
		}
	}
	{
		vector<int> a {54,80,65,47,23,39};
		for (int i = 0; i < (int)a.size(); ++ i) {
			res[a[i]] = H[(i+95-a.size()+2)%H.size()];
		}
	}
	{
		vector<int> a {16,20,11,6,2};
		for (int i = 0; i < (int)a.size(); ++ i) {
			res[a[i]] = H[(i+104-a.size()+2)%H.size()];
		}
	}
	for (auto [x,y] : res) cout << "[" << x << "," << y << "],";
	cout << endl;
	vector<pair<int,int>> pose = {{0,185},{1,202},{5,225},{7,163},{18,67},{29,114},{32,234},{37,158},{38,399},{42,197},{60,370},{61,252},{61,348},{63,55},{63,419},{68,452},{74,248},{76,85},{77,39},{77,102},{77,212},{86,392},{83,148},{84,340},{84,376},{166,185},{85,356},{86,261},{155,209},{98,415},{89,486},{90,402},{94,436},{146,221},{98,441},{101,231},{104,184},{103,464},{112,396},{105,313},{112,116},{188,208},{117,464},{117,591},{119,262},{120,422},{122,208},{121,368},{121,211},{123,9},{123,84},{124,35},{126,303},{144,190},{132,386},{121,231},{158,217},{143,327},{143,176},{146,208},{143,448},{145,284},{146,320},{145,639},{148,236},{148,356},{149,132},{160,212},{153,223},{156,0},{157,33},{158,327},{161,458},{336,317},{165,91},{322,271},{168,565},{170,189},{168,209},{179,210},{169,398},{172,507},{175,433},{177,59},{179,274},{180,332},{163,485},{195,485},{179,154},{172,219},{177,530},{180,237},{166,211},{311,343},{273,347},{304,292},{191,223},{175,299},{186,497},{189,29},{190,8},{190,475},{191,472},{177,214},{187,498},{183,209},{190,213},{197,617},{200,304},{294,298},{186,512},{203,393},{204,432},{204,529},{210,364},{182,524},{207,253},{193,500},{209,94},{213,354},{209,499},{209,502},{212,395},{233,352},{214,468},{214,659},{216,180},{202,515},{208,507},{216,483},{209,504},{271,324},{237,461},{165,532},{221,135},{283,315},{286,335},{257,252},{214,515},{192,519},{227,282},{245,285},{240,313},{208,516},{237,346},{205,388},{219,289},{283,367},{177,517},{230,321},{244,401},{244,457},{235,504},{244,595},{246,417},{251,359},{248,57},{246,509},{249,551},{276,371},{254,110},{270,475},{222,262},{258,433},{255,520},{219,357},{262,277},{261,491},{263,144},{248,270},{266,647},{205,293},{267,598},{269,468},{314,349},{267,508},{263,307},{193,325},{257,348},{256,387},{277,247},{279,389},{279,196},{280,491},{283,192},{281,519},{285,149},{294,356},{289,421},{292,432},{261,311},{291,513},{295,145},{296,553},{293,310},{257,327},{308,358},{310,489},{295,346},{307,516},{299,360},{294,386},{324,395},{326,206},{327,251},{324,289},{296,284},{332,498},{333,127},{338,165},{325,326},{338,331},{338,421},{341,557},{305,407},{353,172},{353,528},{357,229},{336,383},{361,392},{373,190},{377,362},{378,165},{402,389}};
	ll dislike = 0;
	for (auto h : H) {
		ll s = 1<<30;
		for (auto p : pose) {
			s = min(s, d(h, p));
		}
		if (s > 0) cout << h.first << " " << h.second << " " << s << endl;
		dislike += s;
	}
	cout << dislike << endl;
}
